<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stress Booster Games | MindMend</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #003366, #1b2735);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: #0056b3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: translateY(-50%) scale(1.05);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .game-tab {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .game-tab.active {
            background: #0056b3;
            border-color: #0056b3;
            transform: scale(1.05);
        }

        .game-tab:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .game-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .game-area {
            min-height: 400px;
            position: relative;
            margin: 20px 0;
            border-radius: 15px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            min-width: 120px;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4CAF50;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .control-button {
            background: linear-gradient(135deg, #0056b3, #003366);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Game 1: Balloon Pop */
        .balloon {
            width: 60px;
            height: 80px;
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: absolute;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .balloon:hover {
            transform: scale(1.1);
        }

        .balloon.popped {
            animation: pop 0.3s ease-out;
        }

        @keyframes pop {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.5); opacity: 0.8; }
            100% { transform: scale(0); opacity: 0; }
        }

        /* Game 2: Bubble Wrap */
        .bubble {
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, #87CEEB, #4682B4);
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid #fff;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .bubble:hover {
            transform: scale(1.1);
        }

        .bubble.popped {
            animation: bubblePop 0.4s ease-out;
        }

        @keyframes bubblePop {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.3); opacity: 0.6; }
            100% { transform: scale(0); opacity: 0; }
        }

        /* Game 3: Stress Ball */
        .stress-ball {
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, #FF6B6B, #FF8E8E);
            border-radius: 50%;
            position: absolute;
            cursor: pointer;
            transition: all 0.1s ease;
            border: 3px solid #fff;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .stress-ball:active {
            transform: scale(0.9);
        }

        .squeeze-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
        }

        .achievements-bar {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }

        .achievement {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .achievement:hover {
            transform: translateY(-2px);
            background: rgba(0, 0, 0, 0.3);
        }

        .achievement-icon {
            font-size: 1.5em;
        }

        .achievement-points, .achievement-level, .achievement-streak {
            font-weight: 600;
            color: #4CAF50;
        }

        .achievement-label {
            font-size: 0.8em;
            opacity: 0.8;
        }

        .level-up-animation {
            animation: levelUp 0.5s ease-out;
        }

        @keyframes levelUp {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .hidden {
            display: none !important;
        }

        /* Memory Game Styles */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.3s ease;
            position: relative;
            transform-style: preserve-3d;
        }

        .memory-card.flipped {
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            transform: scale(0.95);
            opacity: 0.8;
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            border-radius: 10px;
        }

        .card-front {
            background: white;
            transform: rotateY(180deg);
        }

        .card-back {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
        }

        /* Breathing Exercise Styles */
        .breathing-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: transform 0.3s ease;
        }

        .breathing-circle::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.2);
            animation: pulse 4s ease-in-out infinite;
        }

        .breathing-instruction {
            color: white;
            font-size: 1.2em;
            text-align: center;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }

        .breathing-inhale .breathing-circle {
            transform: scale(1.2);
            transition: transform 4s ease-in;
        }

        .breathing-exhale .breathing-circle {
            transform: scale(1);
            transition: transform 4s ease-out;
        }

        @media (max-width: 768px) {
            .game-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .game-stats {
                flex-direction: column;
                align-items: center;
            }
            
            .stat-item {
                margin: 5px 0;
            }

            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <a href="index.html" class="back-button">‚Üê Back to MindMend</a>
        <h1>Stress Booster Games</h1>
        <p>Fun activities to help reduce stress and anxiety</p>
        <div class="achievements-bar">
            <div class="achievement">
                <span class="achievement-icon">üèÜ</span>
                <span class="achievement-points">0</span>
                <span class="achievement-label">Points</span>
            </div>
            <div class="achievement">
                <span class="achievement-icon">‚≠ê</span>
                <span class="achievement-level">Level 1</span>
            </div>
            <div class="achievement">
                <span class="achievement-icon">üéØ</span>
                <span class="achievement-streak">0</span>
                <span class="achievement-label">Day Streak</span>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="game-selector">
            <button class="game-tab active" onclick="switchGame('balloon')">üéà Balloon Pop</button>
            <button class="game-tab" onclick="switchGame('bubble')">ü´ß Bubble Wrap</button>
            <button class="game-tab" onclick="switchGame('stressball')">üèÄ Stress Ball</button>
            <button class="game-tab" onclick="switchGame('memory')">üé¥ Memory Match</button>
            <button class="game-tab" onclick="switchGame('breathing')">üå¨Ô∏è Breathing Exercise</button>
            <button class="game-tab" onclick="switchGame('memory')">üß© Memory Match</button>
            <button class="game-tab" onclick="switchGame('breathing')">üå∏ Breathing Exercise</button>
        </div>

        <!-- Game 1: Balloon Pop -->
        <div id="balloonGame" class="game-container">
            <h2>üéà Balloon Pop Challenge</h2>
            <p>Pop as many balloons as you can before time runs out!</p>
            
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-number" id="balloonScore">0</div>
                    <div class="stat-label">Balloons Popped</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="balloonTime">30</div>
                    <div class="stat-label">Time Left</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="balloonHighScore">0</div>
                    <div class="stat-label">High Score</div>
                </div>
            </div>

            <div class="game-area" id="balloonArea">
                <p style="padding: 50px; font-size: 18px;">Click "Start Game" to begin popping balloons!</p>
            </div>

            <button class="control-button" id="balloonStartBtn" onclick="startBalloonGame()">Start Game</button>
            <button class="control-button" id="balloonResetBtn" onclick="resetBalloonGame()" disabled>Reset</button>
        </div>

        <!-- Game 2: Bubble Wrap -->
        <div id="bubbleGame" class="game-container hidden">
            <h2>ü´ß Virtual Bubble Wrap</h2>
            <p>Pop all the bubbles to relieve stress!</p>
            
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-number" id="bubbleScore">0</div>
                    <div class="stat-label">Bubbles Popped</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="bubbleTotal">0</div>
                    <div class="stat-label">Total Bubbles</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="bubbleProgress">0%</div>
                    <div class="stat-label">Progress</div>
                </div>
            </div>

            <div class="game-area" id="bubbleArea">
                <p style="padding: 50px; font-size: 18px;">Click "Generate Bubbles" to start popping!</p>
            </div>

            <button class="control-button" onclick="generateBubbles()">Generate Bubbles</button>
            <button class="control-button" onclick="resetBubbleGame()">Reset</button>
        </div>

        <!-- Game 3: Stress Ball -->
        <div id="stressballGame" class="game-container hidden">
            <h2>üèÄ Stress Ball Squeeze</h2>
            <p>Squeeze the stress ball as many times as you can in 30 seconds!</p>

        <!-- Game 4: Memory Match -->
        <div id="memoryGame" class="game-container hidden">
            <h2>üß© Memory Match</h2>
            <p>Match the pairs of calming images to clear your mind</p>
            
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-number" id="memoryMoves">0</div>
                    <div class="stat-label">Moves</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="memoryMatches">0</div>
                    <div class="stat-label">Matches</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="memoryTime">0:00</div>
                    <div class="stat-label">Time</div>
                </div>
            </div>

            <div class="game-area" id="memoryArea">
                <div class="memory-grid"></div>
            </div>

            <button class="control-button" id="memoryStartBtn" onclick="startMemoryGame()">Start Game</button>
            <button class="control-button" id="memoryResetBtn" onclick="resetMemoryGame()" disabled>Reset</button>
        </div>

        <!-- Game 5: Breathing Exercise -->
        <div id="breathingGame" class="game-container hidden">
            <h2>üå∏ Guided Breathing</h2>
            <p>Follow the animation for a calming breathing exercise</p>

            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-number" id="breathingCycles">0</div>
                    <div class="stat-label">Cycles</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="breathingTime">5:00</div>
                    <div class="stat-label">Time Left</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="breathingStreak">0</div>
                    <div class="stat-label">Daily Streak</div>
                </div>
            </div>

            <div class="game-area" id="breathingArea">
                <div class="breathing-circle">
                    <div class="breathing-instruction">Get Ready</div>
                    <div class="breathing-progress"></div>
                </div>
            </div>

            <button class="control-button" id="breathingStartBtn" onclick="startBreathingExercise()">Start Exercise</button>
            <button class="control-button" id="breathingStopBtn" onclick="stopBreathingExercise()" disabled>Stop</button>
        </div>
            
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-number" id="stressballScore">0</div>
                    <div class="stat-label">Squeezes</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="stressballTime">30</div>
                    <div class="stat-label">Time Left</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="stressballHighScore">0</div>
                    <div class="stat-label">High Score</div>
                </div>
            </div>

            <div class="game-area" id="stressballArea">
                <div class="stress-ball" id="stressBall" onclick="squeezeBall()">
                    üí™
                </div>
                <div class="squeeze-counter">
                    Squeeze me!
                </div>
            </div>

            <button class="control-button" id="stressballStartBtn" onclick="startStressballGame()">Start Game</button>
            <button class="control-button" id="stressballResetBtn" onclick="resetStressballGame()" disabled>Reset</button>
        </div>

        <!-- Game 4: Memory Match -->
        <div id="memoryGame" class="game-container hidden">
            <h2>üé¥ Memory Match Challenge</h2>
            <p>Match pairs of cards to improve focus and memory!</p>
            
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-number" id="memoryMatches">0</div>
                    <div class="stat-label">Matches Found</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="memoryMoves">0</div>
                    <div class="stat-label">Moves Made</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="memoryTime">0</div>
                    <div class="stat-label">Time (s)</div>
                </div>
            </div>

            <div class="game-area" id="memoryArea">
                <div class="memory-grid"></div>
            </div>

            <button class="control-button" id="memoryStartBtn" onclick="startMemoryGame()">Start Game</button>
            <button class="control-button" id="memoryResetBtn" onclick="resetMemoryGame()" disabled>Reset</button>
        </div>

        <!-- Game 5: Breathing Exercise -->
        <div id="breathingGame" class="game-container hidden">
            <h2>üå¨Ô∏è Guided Breathing Exercise</h2>
            <p>Follow the animation for a calming breathing session</p>
            
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-number" id="breathingCycles">0</div>
                    <div class="stat-label">Cycles Completed</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="breathingTime">5:00</div>
                    <div class="stat-label">Time Remaining</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalBreathingTime">0</div>
                    <div class="stat-label">Total Practice (min)</div>
                </div>
            </div>

            <div class="game-area" id="breathingArea">
                <div class="breathing-circle">
                    <div class="breathing-instruction">Get Ready</div>
                </div>
            </div>

            <button class="control-button" id="breathingStartBtn" onclick="startBreathingExercise()">Start Exercise</button>
            <button class="control-button" id="breathingResetBtn" onclick="resetBreathingExercise()" disabled>Reset</button>
        </div>
    </div>

    <script>
        let currentGame = 'balloon';
        let balloonGameInterval;
        let stressballGameInterval;
        let balloonScore = 0;
        let bubbleScore = 0;
        let stressballScore = 0;
        let balloonTime = 30;
        let stressballTime = 30;
        let totalPoints = parseInt(localStorage.getItem('totalPoints')) || 0;
        let currentLevel = parseInt(localStorage.getItem('currentLevel')) || 1;
        let dailyStreak = parseInt(localStorage.getItem('dailyStreak')) || 0;
        let lastPlayDate = localStorage.getItem('lastPlayDate') || '';
        
        // Points system
        const POINTS_PER_BALLOON = 10;
        const POINTS_PER_BUBBLE = 5;
        const POINTS_PER_SQUEEZE = 2;
        const POINTS_FOR_LEVEL_UP = 1000;

        // Game switching
        function switchGame(game) {
            // Hide all games
            document.querySelectorAll('.game-container').forEach(container => {
                container.classList.add('hidden');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.game-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected game and activate tab
            document.getElementById(game + 'Game').classList.remove('hidden');
            event.target.classList.add('active');
            
            currentGame = game;
        }

        // Game 1: Balloon Pop
        function startBalloonGame() {
            balloonScore = 0;
            balloonTime = 30;
            updateBalloonStats();
            
            document.getElementById('balloonStartBtn').disabled = true;
            document.getElementById('balloonResetBtn').disabled = false;
            
            // Clear previous balloons
            document.getElementById('balloonArea').innerHTML = '';
            
            // Start timer
            balloonGameInterval = setInterval(() => {
                if (balloonTime > 0) {
                    createBalloon();
                    balloonTime--;
                    updateBalloonStats();
                } else {
                    endBalloonGame();
                }
            }, 1000);
        }

        function createBalloon() {
            const balloon = document.createElement('div');
            balloon.className = 'balloon';
            balloon.style.left = Math.random() * 80 + 10 + '%';
            balloon.style.top = Math.random() * 70 + 15 + '%';
            balloon.innerHTML = 'üéà';
            
            balloon.onclick = function() {
                balloonScore++;
                updateBalloonStats();
                balloon.classList.add('popped');
                setTimeout(() => balloon.remove(), 300);
            };
            
            document.getElementById('balloonArea').appendChild(balloon);
        }

        function endBalloonGame() {
            clearInterval(balloonGameInterval);
            document.getElementById('balloonStartBtn').disabled = false;
            document.getElementById('balloonResetBtn').disabled = false;
            
            // Update high score
            const highScore = Math.max(balloonScore, parseInt(localStorage.getItem('balloonHighScore') || 0));
            localStorage.setItem('balloonHighScore', highScore);
            document.getElementById('balloonHighScore').textContent = highScore;
            
            alert(`Game Over! You popped ${balloonScore} balloons!`);
        }

        function resetBalloonGame() {
            clearInterval(balloonGameInterval);
            balloonScore = 0;
            balloonTime = 30;
            updateBalloonStats();
            document.getElementById('balloonArea').innerHTML = '<p style="padding: 50px; font-size: 18px;">Click "Start Game" to begin popping balloons!</p>';
            document.getElementById('balloonStartBtn').disabled = false;
            document.getElementById('balloonResetBtn').disabled = true;
        }

        function updateBalloonStats() {
            document.getElementById('balloonScore').textContent = balloonScore;
            document.getElementById('balloonTime').textContent = balloonTime;
        }

        // Game 2: Bubble Wrap
        function generateBubbles() {
            const bubbleArea = document.getElementById('bubbleArea');
            bubbleArea.innerHTML = '';
            bubbleScore = 0;
            
            const rows = 8;
            const cols = 12;
            const totalBubbles = rows * cols;
            
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const bubble = document.createElement('div');
                    bubble.className = 'bubble';
                    bubble.style.left = (j * 60 + 20) + 'px';
                    bubble.style.top = (i * 60 + 20) + 'px';
                    
                    bubble.onclick = function() {
                        bubbleScore++;
                        updateBubbleStats();
                        bubble.classList.add('popped');
                        setTimeout(() => bubble.remove(), 400);
                    };
                    
                    bubbleArea.appendChild(bubble);
                }
            }
            
            document.getElementById('bubbleTotal').textContent = totalBubbles;
            updateBubbleStats();
        }

        function updateBubbleStats() {
            document.getElementById('bubbleScore').textContent = bubbleScore;
            const total = parseInt(document.getElementById('bubbleTotal').textContent);
            const progress = total > 0 ? Math.round((bubbleScore / total) * 100) : 0;
            document.getElementById('bubbleProgress').textContent = progress + '%';
        }

        function resetBubbleGame() {
            bubbleScore = 0;
            document.getElementById('bubbleArea').innerHTML = '<p style="padding: 50px; font-size: 18px;">Click "Generate Bubbles" to start popping!</p>';
            updateBubbleStats();
        }

        // Game 3: Stress Ball
        function startStressballGame() {
            stressballScore = 0;
            stressballTime = 30;
            updateStressballStats();
            
            document.getElementById('stressballStartBtn').disabled = true;
            document.getElementById('stressballResetBtn').disabled = false;
            
            // Start timer
            stressballGameInterval = setInterval(() => {
                if (stressballTime > 0) {
                    stressballTime--;
                    updateStressballStats();
                } else {
                    endStressballGame();
                }
            }, 1000);
        }

        function squeezeBall() {
            if (stressballTime > 0 && stressballTime < 30) {
                stressballScore++;
                updateStressballStats();
                
                // Visual feedback
                const ball = document.getElementById('stressBall');
                ball.style.transform = 'scale(0.8)';
                setTimeout(() => {
                    ball.style.transform = 'scale(1)';
                }, 100);
            }
        }

        function endStressballGame() {
            clearInterval(stressballGameInterval);
            document.getElementById('stressballStartBtn').disabled = false;
            document.getElementById('stressballResetBtn').disabled = false;
            
            // Update high score
            const highScore = Math.max(stressballScore, parseInt(localStorage.getItem('stressballHighScore') || 0));
            localStorage.setItem('stressballHighScore', highScore);
            document.getElementById('stressballHighScore').textContent = highScore;
            
            alert(`Time's up! You squeezed the ball ${stressballScore} times!`);
        }

        function resetStressballGame() {
            clearInterval(stressballGameInterval);
            stressballScore = 0;
            stressballTime = 30;
            updateStressballStats();
            document.getElementById('stressballStartBtn').disabled = false;
            document.getElementById('stressballResetBtn').disabled = true;
        }

        function updateStressballStats() {
            document.getElementById('stressballScore').textContent = stressballScore;
            document.getElementById('stressballTime').textContent = stressballTime;
        }

        // Points and achievements system
        function updatePoints(points) {
            totalPoints += points;
            localStorage.setItem('totalPoints', totalPoints);
            document.querySelector('.achievement-points').textContent = totalPoints;

            // Check for level up
            const newLevel = Math.floor(totalPoints / POINTS_FOR_LEVEL_UP) + 1;
            if (newLevel > currentLevel) {
                levelUp(newLevel);
            }
        }

        function levelUp(newLevel) {
            currentLevel = newLevel;
            localStorage.setItem('currentLevel', currentLevel);
            const levelElement = document.querySelector('.achievement-level');
            levelElement.textContent = `Level ${currentLevel}`;
            levelElement.classList.add('level-up-animation');
            setTimeout(() => levelElement.classList.remove('level-up-animation'), 500);
            
            // Show level up message
            alert(`üéâ Congratulations! You've reached Level ${currentLevel}!`);
        }

        function updateStreak() {
            const today = new Date().toDateString();
            if (lastPlayDate !== today) {
                if (lastPlayDate === new Date(Date.now() - 86400000).toDateString()) {
                    dailyStreak++;
                } else {
                    dailyStreak = 1;
                }
                localStorage.setItem('dailyStreak', dailyStreak);
                localStorage.setItem('lastPlayDate', today);
                document.querySelector('.achievement-streak').textContent = dailyStreak;
            }
        }

        // Modified game end functions
        function endBalloonGame() {
            clearInterval(balloonGameInterval);
            document.getElementById('balloonStartBtn').disabled = false;
            document.getElementById('balloonResetBtn').disabled = false;
            
            const points = balloonScore * POINTS_PER_BALLOON;
            updatePoints(points);
            updateStreak();
            
            // Update high score
            const highScore = Math.max(balloonScore, parseInt(localStorage.getItem('balloonHighScore') || 0));
            localStorage.setItem('balloonHighScore', highScore);
            document.getElementById('balloonHighScore').textContent = highScore;
            
            alert(`Game Over! You popped ${balloonScore} balloons and earned ${points} points!`);
        }

        function endStressballGame() {
            clearInterval(stressballGameInterval);
            document.getElementById('stressballStartBtn').disabled = false;
            document.getElementById('stressballResetBtn').disabled = false;
            
            const points = stressballScore * POINTS_PER_SQUEEZE;
            updatePoints(points);
            updateStreak();
            
            // Update high score
            const highScore = Math.max(stressballScore, parseInt(localStorage.getItem('stressballHighScore') || 0));
            localStorage.setItem('stressballHighScore', highScore);
            document.getElementById('stressballHighScore').textContent = highScore;
            
            alert(`Time's up! You squeezed the ball ${stressballScore} times and earned ${points} points!`);
        }

        // Memory Game
        let memoryCards = [];
        let flippedCards = [];
        let memoryMatches = 0;
        let memoryMoves = 0;
        let memoryTimer;
        let memoryTime = 0;
        const POINTS_PER_MATCH = 20;
        const MEMORY_BONUS = 100;

        function startMemoryGame() {
            memoryMatches = 0;
            memoryMoves = 0;
            memoryTime = 0;
            updateMemoryStats();
            
            const emojis = ['üåü', 'üéà', 'üéÆ', 'üéØ', 'üé®', 'üé≠', 'üé™', 'üé´'];
            memoryCards = [...emojis, ...emojis];
            shuffleArray(memoryCards);
            
            const grid = document.querySelector('.memory-grid');
            grid.innerHTML = '';
            
            memoryCards.forEach((emoji, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.index = index;
                card.innerHTML = `
                    <div class="card-front">${emoji}</div>
                    <div class="card-back"></div>
                `;
                card.addEventListener('click', flipCard);
                grid.appendChild(card);
            });
            
            document.getElementById('memoryStartBtn').disabled = true;
            document.getElementById('memoryResetBtn').disabled = false;
            
            memoryTimer = setInterval(() => {
                memoryTime++;
                updateMemoryStats();
            }, 1000);
        }

        function flipCard(e) {
            const card = e.currentTarget;
            if (flippedCards.length === 2 || card.classList.contains('flipped')) return;
            
            card.classList.add('flipped');
            flippedCards.push(card);
            
            if (flippedCards.length === 2) {
                memoryMoves++;
                updateMemoryStats();
                
                const [card1, card2] = flippedCards;
                const emoji1 = card1.querySelector('.card-front').textContent;
                const emoji2 = card2.querySelector('.card-front').textContent;
                
                if (emoji1 === emoji2) {
                    memoryMatches++;
                    updateMemoryStats();
                    flippedCards.forEach(card => card.classList.add('matched'));
                    flippedCards = [];
                    updatePoints(POINTS_PER_MATCH);
                    
                    if (memoryMatches === memoryCards.length / 2) {
                        endMemoryGame();
                    }
                } else {
                    setTimeout(() => {
                        flippedCards.forEach(card => card.classList.remove('flipped'));
                        flippedCards = [];
                    }, 1000);
                }
            }
        }

        function updateMemoryStats() {
            document.getElementById('memoryMatches').textContent = memoryMatches;
            document.getElementById('memoryMoves').textContent = memoryMoves;
            document.getElementById('memoryTime').textContent = memoryTime;
        }

        function endMemoryGame() {
            clearInterval(memoryTimer);
            const bonus = Math.max(0, MEMORY_BONUS - (memoryMoves - memoryCards.length));
            updatePoints(bonus);
            alert(`Congratulations! You completed the game in ${memoryMoves} moves and earned ${bonus} bonus points!`);
        }

        function resetMemoryGame() {
            clearInterval(memoryTimer);
            document.querySelector('.memory-grid').innerHTML = '';
            memoryMatches = 0;
            memoryMoves = 0;
            memoryTime = 0;
            flippedCards = [];
            updateMemoryStats();
            document.getElementById('memoryStartBtn').disabled = false;
            document.getElementById('memoryResetBtn').disabled = true;
        }

        // Breathing Exercise
        let breathingCycles = 0;
        let breathingTime = 300; // 5 minutes
        let breathingTimer;
        let breathingState = 'ready';
        const POINTS_PER_CYCLE = 15;

        function startBreathingExercise() {
            document.getElementById('breathingStartBtn').disabled = true;
            document.getElementById('breathingResetBtn').disabled = false;
            
            breathingTimer = setInterval(() => {
                if (breathingTime > 0) {
                    breathingTime--;
                    updateBreathingStats();
                    
                    const instruction = document.querySelector('.breathing-instruction');
                    const circle = document.querySelector('.breathing-circle');
                    
                    if (breathingTime % 8 === 0) {
                        instruction.textContent = 'Inhale';
                        circle.classList.remove('breathing-exhale');
                        circle.classList.add('breathing-inhale');
                        breathingState = 'inhale';
                    } else if (breathingTime % 8 === 4) {
                        instruction.textContent = 'Exhale';
                        circle.classList.remove('breathing-inhale');
                        circle.classList.add('breathing-exhale');
                        breathingState = 'exhale';
                        
                        if (breathingTime % 8 === 4) {
                            breathingCycles++;
                            updatePoints(POINTS_PER_CYCLE);
                            updateBreathingStats();
                        }
                    }
                } else {
                    endBreathingExercise();
                }
            }, 1000);
        }

        function updateBreathingStats() {
            document.getElementById('breathingCycles').textContent = breathingCycles;
            const minutes = Math.floor(breathingTime / 60);
            const seconds = breathingTime % 60;
            document.getElementById('breathingTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('totalBreathingTime').textContent = 
                Math.round((300 - breathingTime) / 60 * 10) / 10;
        }

        function endBreathingExercise() {
            clearInterval(breathingTimer);
            const totalMinutes = Math.round((300 - breathingTime) / 60 * 10) / 10;
            alert(`Great job! You completed ${breathingCycles} breathing cycles in ${totalMinutes} minutes!`);
            updateStreak();
        }

        function resetBreathingExercise() {
            clearInterval(breathingTimer);
            breathingCycles = 0;
            breathingTime = 300;
            breathingState = 'ready';
            updateBreathingStats();
            document.getElementById('breathingStartBtn').disabled = false;
            document.getElementById('breathingResetBtn').disabled = true;
            document.querySelector('.breathing-instruction').textContent = 'Get Ready';
            document.querySelector('.breathing-circle').className = 'breathing-circle';
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Load scores and achievements on page load
        window.addEventListener('load', function() {
            document.getElementById('balloonHighScore').textContent = localStorage.getItem('balloonHighScore') || 0;
            document.getElementById('stressballHighScore').textContent = localStorage.getItem('stressballHighScore') || 0;
            document.querySelector('.achievement-points').textContent = totalPoints;
            document.querySelector('.achievement-level').textContent = `Level ${currentLevel}`;
            document.querySelector('.achievement-streak').textContent = dailyStreak;
            updateStreak();
        });
    </script>
</body>
</html>
